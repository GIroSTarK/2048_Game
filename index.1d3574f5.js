function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var r,e=document.querySelector(".button"),n=document.querySelector(".message-start"),o=document.querySelector(".message-lose"),a=document.querySelector(".message-win"),i=document.querySelector(".game-score"),c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f=!1,s=0;function u(t,e){t.textContent="",t.classList.value="",t.classList.add("field-cell"),e>0&&(t.textContent=e,t.classList.add("field-cell--".concat(e))),2048===e&&(a.classList.remove("hidden"),r=!0),function(){if(h())return!1;for(var t=0;t<4;t++)for(var r=0;r<4;r++)if(c[t][r]===c[t][r+1])return!1;for(var e=0;e<3;e++)for(var n=0;n<4;n++)if(c[e][n]===c[e+1][n])return!1;return!0}()&&o.classList.remove("hidden")}function l(t,r){for(var e=0;e<4;e++){c[e][t]=r[e];var n=c[e][t];u(document.getElementById("".concat(e,"-").concat(t)),n)}}function d(t){for(var r=0;r<4;r++){var e=c[t][r];u(document.getElementById("".concat(t,"-").concat(r)),e)}}function v(t){for(var r=y(t),e=1;e<r.length;e++)r[e-1]===r[e]&&(r[e-1]*=2,r[e]=0,s+=r[e-1]);for(r=y(r);r.length<4;)r.push(0);return r}function y(t){return t.filter(function(t){return t>0})}function m(){if(h())for(var t=!1;!t;){var r=Math.floor(4*Math.random()),e=Math.floor(4*Math.random());if(0===c[r][e]){var n=.1>=Math.random()?4:2;c[r][e]=n;var o=document.getElementById("".concat(r,"-").concat(e));o.textContent=n,o.classList.add("field-cell--".concat(n)),t=!0}}}function h(){var t=!0,r=!1,e=void 0,n=!0,o=!1,a=void 0;try{for(var i,f=c[Symbol.iterator]();!(n=(i=f.next()).done);n=!0){var s=i.value;try{for(var u,l=s[Symbol.iterator]();!(t=(u=l.next()).done);t=!0){var d=u.value;if(0===d)return!0}}catch(t){r=!0,e=t}finally{try{t||null==l.return||l.return()}finally{if(r)throw e}}}}catch(t){o=!0,a=t}finally{try{n||null==f.return||f.return()}finally{if(o)throw a}}return!1}function L(){return c.map(function(r){return function(r){if(Array.isArray(r))return t(r)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(r,e){if(r){if("string"==typeof r)return t(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()})}function g(t){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(c[r][e]!==t[r][e])return!1;return!0}e.addEventListener("click",function(){e.classList.contains("start")?(e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart",n.classList.add("hidden"),r=!1,f=!0,m(),m()):(e.classList.remove("restart"),e.classList.add("start"),e.textContent="Start",n.classList.remove("hidden"),a.classList.add("hidden"),o.classList.add("hidden"),function(){for(var t=0;t<4;t++){for(var r=0;r<4;r++)0!==c[t][r]&&(c[t][r]=0);d(t)}s=0}(),i.textContent="0",f=!1)}),document.addEventListener("keydown",function(t){if(!r&&f){if("w"===t.key||"ArrowUp"===t.key){var e=L();(function(){for(var t=0;t<4;t++){var r=[c[0][t],c[1][t],c[2][t],c[3][t]];l(t,r=v(r))}})(),g(e)||m()}if("a"===t.key||"ArrowLeft"===t.key){var n=L();(function(){for(var t=0;t<4;t++)c[t]=v(c[t]),d(t)})(),g(n)||m()}if("d"===t.key||"ArrowRight"===t.key){var o=L();(function(){for(var t=0;t<4;t++)c[t].reverse(),c[t]=v(c[t]),c[t].reverse(),d(t)})(),g(o)||m()}if("s"===t.key||"ArrowDown"===t.key){var a=L();(function(){for(var t=0;t<4;t++){var r=[c[0][t],c[1][t],c[2][t],c[3][t]];r.reverse(),(r=v(r)).reverse(),l(t,r)}})(),g(a)||m()}i.textContent=s}});
//# sourceMappingURL=index.1d3574f5.js.map
